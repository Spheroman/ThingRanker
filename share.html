<!DOCTYPE html> 
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="layout.css">
        <link rel="stylesheet" href="share.css">
        <link rel="stylesheet" href="fonts.css">
        <title>Share</title>
    </head>

    <body>
        <h1>Competition Name</h1>
        <h2>SHARE</h2>

        <input class="link" onchange="UpdateQRCode(this.value)" type="text" value="link.xyz/joincode" id="link">

        <div class="tooltip">
        <button class="button" onclick="copyIn()" onmouseout="copyOut()">
            <span class="tooltiptext" id="myTooltip">Copy to clipboard</span>
            Copy Link
        </button>
        </div>
        <br><iframe id="qrcode" src="" width="250" height="250"></iframe>


        <script>
            function UpdateQRCode(val){
                document.getElementById("qrcode").setAttribute("src","https://api.mimfa.net/qrcode?value="+encodeURIComponent(val)+"&as=value");
            }
            document.addEventListener("DOMContentLoaded", function(){
                UpdateQRCode(document.getElementById("qrcode").value);
            });

        
            function copyIn() {
            var copyText = document.getElementById("link");
            copyText.select();
            copyText.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(copyText.value);
            
            var tooltip = document.getElementById("myTooltip");
            tooltip.innerHTML = "Copied: " + copyText.value;
            }

            function copyOut() {
            var tooltip = document.getElementById("myTooltip");
            tooltip.innerHTML = "Copy to clipboard";
            }
        </script>
    </body>
</html>
